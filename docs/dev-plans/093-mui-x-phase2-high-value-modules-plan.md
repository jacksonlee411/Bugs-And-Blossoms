# DEV-PLAN-093：MUI X 升级子计划 P2（高价值模块迁移）

**状态**: 实施中（2026-02-12 08:01 UTC）

> 本计划承接 `DEV-PLAN-090` 的 §5.3（Phase 2），优先迁移对业务价值最高的模块，形成可感知收益。

## 1. 子计划范围

- 对应 `DEV-PLAN-090` 步骤：8~10。
- 时间窗口：2~4 周。
- 覆盖模块：组织架构、人员与任职、审批/待办。

## 2. 核心目标（DoD）

- [x] 组织架构模块完成 Tree + DataGrid 双栏闭环。
- [x] 人员与任职模块完成复杂筛选、批量动作、详情侧栏。
- [x] 审批/待办模块完成列表状态流转与详情联动。
- [ ] 模块迁移后关键路径 E2E 可通过。

## 3. 非目标

- 不在本阶段迁移全部长尾页面。
- 不在本阶段重构后端接口契约（仅在必要时新增兼容查询参数）。

## 4. 实施步骤

### 4.1 TP-093-01 组织架构模块

1. [x] 树组件统一到 MUI Tree（含懒加载协议）。
2. [x] 右侧列表统一到 DataGrid（分页/排序/筛选）。
3. [x] 树-表联动：选中节点驱动列表过滤，保持 URL 可复现。

### 4.2 TP-093-02 人员与任职模块

4. [x] 人员列表迁移为 DataGrid，接入复杂筛选能力。
5. [x] 任职记录迁移为双栏（列表 + 详情），支持批量动作入口。
6. [x] 统一详情侧栏组件，避免每页重复实现。

### 4.3 TP-093-03 审批/待办模块

7. [x] 待办列表迁移 DataGrid，统一状态标签与操作列。
8. [x] 审批详情接入侧栏模式，并支持列表联动刷新。
9. [x] 审批动作（同意/拒绝/转交）完成结果反馈规范化。

### 4.4 回归与验收

10. [x] 完成可演示走查版本（组织/人员/审批三模块页面可运行）。
11. [ ] 每个子模块至少 1 条 E2E 主路径通过并固化（待下一步执行）。

## 5. 验收标准

- [x] 三个高价值模块均具备“筛选 + 列表 + 详情 + 操作”闭环。
- [x] 页面在新壳下交互一致（导航/筛选/详情/反馈统一）。
- [x] 不出现“新壳 + 旧页面”导致的交互冲突。
- [ ] 性能对比与 E2E 报告待补齐。

## 6. 已落地变更（本轮）

- `OrgUnitsPage`：树 + 表 + URL 参数联动 + 详情侧栏。
- `PeopleAssignmentsPage`：复杂筛选 + 批量动作确认 + 详情侧栏。
- `ApprovalsInboxPage`：审批状态流转 + 操作列 + 详情联动。
- 路由替换：`/org/units`、`/people`、`/approvals` 已接入真实页面。
- 壳层 i18n 文案扩展：补齐组织/人员/审批模块中英文文案。

## 7. 风险与缓解

- 风险：批量动作与审批动作仅为前端模拟，后续需对接真实 API。  
  缓解：保持动作入口与反馈契约稳定，P094 接入真实后端并补充错误码映射。
- 风险：模块 E2E 尚未固化。  
  缓解：下一步优先补齐三条主路径 E2E，并纳入 CI 绿线。

## 8. 执行记录（2026-02-12）

- 已执行并通过：
  - `pnpm -C apps/web-mui lint`
  - `pnpm -C apps/web-mui typecheck`
  - `pnpm -C apps/web-mui test`
  - `pnpm -C apps/web-mui build`
  - `pnpm -C apps/web-mui check`

## 9. 关联计划

- 总方案：`docs/dev-plans/090-mui-x-frontend-upgrade-plan.md`
- 组织相关：`docs/dev-plans/073-orgunit-crud-implementation-status.md`
- 质量门禁：`docs/dev-plans/012-ci-quality-gates.md`
